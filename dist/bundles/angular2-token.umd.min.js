!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common"),require("@angular/router"),require("@angular/common/http"),require("rxjs/operators"),require("@angular/http"),require("rxjs/Observable"),require("rxjs/add/operator/share"),require("rxjs/add/observable/interval"),require("rxjs/add/observable/fromEvent"),require("rxjs/add/operator/pluck"),require("rxjs/add/operator/filter")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/forms","@angular/common","@angular/router","@angular/common/http","rxjs/operators","@angular/http","rxjs/Observable","rxjs/add/operator/share","rxjs/add/observable/interval","rxjs/add/observable/fromEvent","rxjs/add/operator/pluck","rxjs/add/operator/filter"],e):e(t["angular2-token"]={},t.ng.core,t.ng.forms,t.ng.common,t.ng.router,t.ng.common.http,t.Rx.Observable.prototype,t.ng.http,t.Rx)}(this,function(t,e,r,n,o,s,a,i,u){"use strict";var p=function(){function t(){this.submit$=new e.EventEmitter,this.submitLock=!1}return t.prototype.initForm=function(t){this.fields=t,this._createFormGroup()},t.prototype.submit=function(){this.submitLock=!0,this.submit$.emit(this.formGroup.value)},t.prototype.unlockSubmit=function(){this.formGroup.reset(),this.submitLock=!1},t.prototype._createFormGroup=function(){var e={};this.fields.forEach(function(t){e[t.key]=new r.FormControl(null,t.validators)}),this.formGroup=new r.FormGroup(e)},t}();p.decorators=[{type:e.Injectable}],p.ctorParameters=function(){return[]};var l=function(t){void 0===t&&(t={}),this.value=t.value,this.key=t.key||"",this.label=t.label||"",this.validators=t.validators===undefined?[]:t.validators,this.type=t.type||""},c=[new l({key:"email",label:"Email",type:"text",validators:[r.Validators.required,r.Validators.minLength(8)]}),new l({key:"password",label:"Password",type:"password",validators:[r.Validators.required,r.Validators.minLength(8)]})],h=[new l({key:"email",label:"Email",type:"text",validators:[r.Validators.required,r.Validators.minLength(8)]}),new l({key:"password",label:"Password",type:"password",validators:[r.Validators.required,r.Validators.minLength(8)]}),new l({key:"passwordConfirmation",label:"Password Confirmation",type:"password",validators:[r.Validators.required,r.Validators.minLength(8)]})],d=[new l({key:"email",label:"Email",type:"text",validators:[r.Validators.required,r.Validators.minLength(8)]})],m=[new l({key:"password",label:"Password",type:"password",validators:[r.Validators.required,r.Validators.minLength(8)]}),new l({key:"passwordConfirmation",label:"Password Confirmation",type:"password",validators:[r.Validators.required,r.Validators.minLength(8)]}),new l({key:"passwordCurrent",label:"Old Password",type:"password",validators:[r.Validators.required,r.Validators.minLength(8)]})],f=function(){function t(){}return t.prototype.ngOnInit=function(){this._control=this.form.controls[this.question.key]},Object.defineProperty(t.prototype,"isValid",{get:function(){return this._control.valid},enumerable:!0,configurable:!0}),t}();f.decorators=[{type:e.Component,args:[{selector:"a2t-form-field",template:'\n        <div class="a2t-input-group"\n            [formGroup]="form">\n            <label\n                [attr.for]="question.key"\n                [style.color]="labelColor"\n                *ngIf="_control.pristine">\n                {{question.label}}\n            </label>\n            <label class="a2t-error"\n                [attr.for]="question.key"\n                *ngIf="_control.hasError(\'required\') && !_control.pristine">\n                {{question.label}} is required\n            </label>\n            <label class="a2t-error"\n                [attr.for]="question.key"\n                *ngIf="_control.hasError(\'minlength\')">\n                {{question.label}} is too short\n            </label>\n            <label class="a2t-error"\n                [attr.for]="question.key"\n                *ngIf="_control.hasError(\'maxlength\')">\n                {{question.label}} is too long\n            </label>\n            <label class="a2t-valid"\n                [attr.for]="question.key"\n                *ngIf="_control.valid && !_control.pristine">\n                {{question.label}}\n            </label>\n            <input\n                [formControlName]="question.key"\n                [id]="question.key"\n                [type]="question.type">\n        </div>\n    ',styles:['\n        .a2t-input-group {\n            padding-bottom: 40px;\n            padding-right: 20px;\n            padding-left: 20px;\n            font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;\n        }\n        .a2t-input-group input {\n            width: 100%;\n            outline: none;\n            border: none;\n            background-color: #eee;\n            line-height: 40px;\n            padding-left: 10px;\n            padding-right: 10px;\n        }\n        .a2t-input-group label {\n            color: #666;\n            font-weight: 600;\n            font-size: 13px;\n            margin-bottom: 0;\n        }\n        .a2t-error {\n            color: #df6564 !important;\n        }\n        .a2t-valid {\n            color: #72c380 !important;\n        }\n    ']}]}],f.ctorParameters=function(){return[]},f.propDecorators={question:[{type:e.Input}],form:[{type:e.Input}]};var g=function(t){this._formService=t};g.decorators=[{type:e.Component,args:[{selector:"a2t-form",template:'\n        <form class="a2t-form"\n            (ngSubmit)="_formService.submit()"\n            [formGroup]="_formService.formGroup">\n            <a2t-form-field\n                *ngFor="let field of this._formService.fields"\n                [question]="field"\n                [form]="_formService.formGroup">\n            </a2t-form-field>\n            <button type="submit" [disabled]="!_formService.formGroup.valid || _formService.formGroup.pristine || _formService.submitLock">\n                <ng-content *ngIf="!_formService.submitLock"></ng-content>\n                <span *ngIf="_formService.submitLock">Submitting ...</span>\n            </button>\n        </form>\n    ',styles:['\n        .a2t-form {\n            background-color: white;\n            border-radius: 3px;\n            box-shadow: 0px 1px 5px 0 rgba(0,0,0,0.3);\n            padding-top: 20px;\n            font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;\n        }\n        .a2t-form button {\n            width: 100%;\n            transition: .3s;\n            background-color: #72c380;\n            border-bottom-right-radius: 3px;\n            border-bottom-left-radius: 3px;\n            outline: none;\n            text-align: center;\n            font-weight: 400;\n            border: none;\n            font-size: 16px;\n            line-height: 30px;\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.25);\n            color: white;\n            border-bottom: 3px solid transparent;\n        }\n        .a2t-form button:disabled {\n            background-color: #eee !important;\n            cursor: not-allowed;\n            color: #999;\n            text-shadow: none;\n        }\n        .a2t-form button:hover {\n            background-color: #a6d9ae;\n        }\n    ']}]}],g.ctorParameters=function(){return[{type:p}]};var y=function(){};y.decorators=[{type:e.Component,args:[{selector:"a2t-links",template:'\n        <div class="a2t-wrapper">\n            <p><a routerLink="/session/reset-password" *ngIf="case != \'reset-password\'">Forgot Password?</a></p>\n            <p><a routerLink="/session/sign-up" *ngIf="case != \'sign-up\'">Sign Up</a></p>\n            <p><a routerLink="/session/sign-in" *ngIf="case != \'sign-in\'">Sign In</a></p>\n        </div>\n    ',styles:['\n        .a2t-wrapper {\n            margin-top: 20px;\n        }\n        p {\n            margin-bottom: 0;\n        }\n        a {\n            color: #eee !important;\n            transition: .3s;\n            text-decoration: none;\n            font-size: 15px;\n            font-weight: 300;\n            font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;\n        }\n        a:hover {\n            color: white;\n        }\n    ']}]}],y.ctorParameters=function(){return[]},y.propDecorators={"case":[{type:e.Input}]};var b=function(){};b.decorators=[{type:e.Component,args:[{selector:"a2t-error",template:'<div *ngFor="let error of errors"><p>{{error}}</p></div>',styles:["\n        div {\n            width: 100%;\n            background-color: #df6564;\n            color: white;\n            font-weight: 300;\n            font-size: 15px;\n            padding: 10px 20px;\n            border-radius: 3px;\n            margin-bottom: 15px;\n        }\n        div > p {\n            margin-bottom: 0;\n        }\n    "]}]}],b.ctorParameters=function(){return[]},b.propDecorators={errors:[{type:e.Input}]};var v=function(){};v.decorators=[{type:e.Component,args:[{selector:"a2t-headline",template:"<p><ng-content></ng-content></p>",styles:["\n        p {\n            text-align: center;\n            color: white;\n            font-size: 30px;\n        }\n    "]}]}],v.ctorParameters=function(){return[]};var w=function(){};w.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule,r.ReactiveFormsModule,o.RouterModule],declarations:[f,g,y,b,v],exports:[g,y,b,v]}]}],w.ctorParameters=function(){return[]};var _=function(){};_.decorators=[{type:e.Component,args:[{selector:"a2t-ui",template:'\n        <div class="a2t-wrapper">\n            <div class="a2t-container">\n                <router-outlet></router-outlet>\n            </div>\n        </div>\n    ',styles:["\n        .a2t-wrapper {\n            width: 100%;\n            height: 100vh;\n            min-height: 500px;\n            padding-top: 100px;\n            display: flex;\n            justify-content: center;\n            background-color: #3270a0;\n        }\n        .a2t-logo {\n            text-align: center;\n            color: white;\n            font-size: 30px;\n        }\n        .a2t-container {\n            width: 400px;\n        }\n    "]}]}],_.ctorParameters=function(){return[]};var k=function(){function t(){}return t.prototype.intercept=function(e,t){return t.handle(e).pipe(a.tap(function(t){console.log("In token interceptor, evt : ",t),t instanceof s.HttpResponse&&(console.log("---\x3e status:",t.status),console.log("---\x3e filter:",e.params.get("filter")))}))},t}();k.decorators=[{type:e.Injectable}],k.ctorParameters=function(){return[]};var S={provide:s.HTTP_INTERCEPTORS,useClass:k,multi:!0},P=function(){function t(t,e,r){this.http=t,this.activatedRoute=e,this.router=r}return Object.defineProperty(t.prototype,"currentUserType",{get:function(){return null!=this.atCurrentUserType?this.atCurrentUserType.name:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentUserData",{get:function(){return this.atCurrentUserData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentAuthData",{get:function(){return this.atCurrentAuthData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentAuthHeaders",{get:function(){return null!=this.atCurrentAuthData?new i.Headers({"access-token":this.atCurrentAuthData.accessToken,client:this.atCurrentAuthData.client,expiry:this.atCurrentAuthData.expiry,"token-type":this.atCurrentAuthData.tokenType,uid:this.atCurrentAuthData.uid}):new i.Headers},enumerable:!0,configurable:!0}),t.prototype.userSignedIn=function(){return!!this.atCurrentAuthData},t.prototype.canActivate=function(){return!!this.userSignedIn()||(this.atOptions.signInStoredUrlStorageKey&&localStorage.setItem(this.atOptions.signInStoredUrlStorageKey,window.location.pathname+window.location.search),this.router&&this.atOptions.signInRedirect&&this.router.navigate([this.atOptions.signInRedirect]),!1)},t.prototype.init=function(t){var e={apiPath:null,apiBase:null,signInPath:"auth/sign_in",signInRedirect:null,signInStoredUrlStorageKey:null,signOutPath:"auth/sign_out",validateTokenPath:"auth/validate_token",signOutFailedValidate:!1,registerAccountPath:"auth",deleteAccountPath:"auth",registerAccountCallback:window.location.href,updatePasswordPath:"auth",resetPasswordPath:"auth/password",resetPasswordCallback:window.location.href,userTypes:null,oAuthBase:window.location.origin,oAuthPaths:{github:"auth/github"},oAuthCallbackPath:"oauth_callback",oAuthWindowType:"newWindow",oAuthWindowOptions:null,globalOptions:{headers:{"Content-Type":"application/json",Accept:"application/json"}}};this.atOptions=Object.assign(e,t),this.tryLoadAuthData()},t.prototype.registerAccount=function(t){return null==t.userType?this.atCurrentUserType=null:(this.atCurrentUserType=this.getUserTypeByName(t.userType),delete t.userType),t.password_confirmation=t.passwordConfirmation,delete t.passwordConfirmation,t.confirm_success_url=this.atOptions.registerAccountCallback,this.post(this.getUserPath()+this.atOptions.registerAccountPath,JSON.stringify(t))},t.prototype.deleteAccount=function(){return this["delete"](this.getUserPath()+this.atOptions.deleteAccountPath)},t.prototype.signIn=function(t){var e=this;null==t.userType?this.atCurrentUserType=null:this.atCurrentUserType=this.getUserTypeByName(t.userType);var r=JSON.stringify({email:t.email,password:t.password}),n=this.post(this.getUserPath()+this.atOptions.signInPath,r);return n.subscribe(function(t){return e.atCurrentUserData=t.json().data},function(t){return null}),n},t.prototype.signInOAuth=function(t){var e=this.getOAuthPath(t),r=window.location.origin+"/"+this.atOptions.oAuthCallbackPath,n=this.atOptions.oAuthWindowType,o=this.getOAuthUrl(e,r,n);if("newWindow"==n){var s=this.atOptions.oAuthWindowOptions,a="";if(s)for(var i in s)a+=","+i+"="+s[i];var u=window.open(o,"_blank","closebuttoncaption=Cancel"+a);return this.requestCredentialsViaPostMessage(u)}if("sameWindow"!=n)throw'Unsupported oAuthWindowType "'+n+'"';window.location.href=o},t.prototype.processOAuthCallback=function(){this.getAuthDataFromParams()},t.prototype.signOut=function(){var t=this["delete"](this.getUserPath()+this.atOptions.signOutPath);return localStorage.removeItem("accessToken"),localStorage.removeItem("client"),localStorage.removeItem("expiry"),localStorage.removeItem("tokenType"),localStorage.removeItem("uid"),this.atCurrentAuthData=null,this.atCurrentUserType=null,this.atCurrentUserData=null,t},t.prototype.validateToken=function(){var e=this,t=this.get(this.getUserPath()+this.atOptions.validateTokenPath);return t.subscribe(function(t){return e.atCurrentUserData=t.json().data},function(t){401===t.status&&e.atOptions.signOutFailedValidate&&e.signOut()}),t},t.prototype.updatePassword=function(t){var e;null!=t.userType&&(this.atCurrentUserType=this.getUserTypeByName(t.userType)),e=null==t.passwordCurrent?{password:t.password,password_confirmation:t.passwordConfirmation}:{current_password:t.passwordCurrent,password:t.password,password_confirmation:t.passwordConfirmation},t.resetPasswordToken&&(e.reset_password_token=t.resetPasswordToken);var r=JSON.stringify(e);return this.put(this.getUserPath()+this.atOptions.updatePasswordPath,r)},t.prototype.resetPassword=function(t){null==t.userType?this.atCurrentUserType=null:this.atCurrentUserType=this.getUserTypeByName(t.userType);var e=JSON.stringify({email:t.email,redirect_url:this.atOptions.resetPasswordCallback});return this.post(this.getUserPath()+this.atOptions.resetPasswordPath,e)},t.prototype.get=function(t,e){return this.request(this.mergeRequestOptionsArgs({url:this.getApiPath()+t,method:i.RequestMethod.Get},e))},t.prototype.post=function(t,e,r){return this.request(this.mergeRequestOptionsArgs({url:this.getApiPath()+t,method:i.RequestMethod.Post,body:e},r))},t.prototype.put=function(t,e,r){return this.request(this.mergeRequestOptionsArgs({url:this.getApiPath()+t,method:i.RequestMethod.Put,body:e},r))},t.prototype["delete"]=function(t,e){return this.request(this.mergeRequestOptionsArgs({url:this.getApiPath()+t,method:i.RequestMethod.Delete},e))},t.prototype.patch=function(t,e,r){return this.request(this.mergeRequestOptionsArgs({url:this.getApiPath()+t,method:i.RequestMethod.Patch,body:e},r))},t.prototype.head=function(t,e){return this.request({method:i.RequestMethod.Head,url:this.getApiPath()+t})},t.prototype.options=function(t,e){return this.request(this.mergeRequestOptionsArgs({url:this.getApiPath()+t,method:i.RequestMethod.Options},e))},t.prototype.request=function(t){var e,r=this.atOptions.globalOptions.headers;this.getAuthDataFromStorage(),null!=this.atCurrentAuthData&&Object.assign(r,{"access-token":this.atCurrentAuthData.accessToken,client:this.atCurrentAuthData.client,expiry:this.atCurrentAuthData.expiry,"token-type":this.atCurrentAuthData.tokenType,uid:this.atCurrentAuthData.uid}),e=(e=new i.RequestOptions({headers:new i.Headers(r)})).merge(t);var n=this.http.request(new i.Request(e)).share();return this.handleResponse(n),n},t.prototype.mergeRequestOptionsArgs=function(t,e){var r=t;return t&&Object.assign(r,e),r},t.prototype.handleResponse=function(t){var e=this;t.subscribe(function(t){e.getAuthHeadersFromResponse(t)},function(t){e.getAuthHeadersFromResponse(t)})},t.prototype.tryLoadAuthData=function(){var t=this.getUserTypeByName(localStorage.getItem("userType"));t&&(this.atCurrentUserType=t),this.getAuthDataFromStorage(),this.activatedRoute&&this.getAuthDataFromParams(),this.atCurrentAuthData&&this.validateToken()},t.prototype.getAuthHeadersFromResponse=function(t){var e=t.headers,r={accessToken:e.get("access-token"),client:e.get("client"),expiry:e.get("expiry"),tokenType:e.get("token-type"),uid:e.get("uid")};this.setAuthData(r)},t.prototype.getAuthDataFromPostMessage=function(t){var e={accessToken:t.auth_token,client:t.client_id,expiry:t.expiry,tokenType:"Bearer",uid:t.uid};this.setAuthData(e)},t.prototype.getAuthDataFromStorage=function(){var t={accessToken:localStorage.getItem("accessToken"),client:localStorage.getItem("client"),expiry:localStorage.getItem("expiry"),tokenType:localStorage.getItem("tokenType"),uid:localStorage.getItem("uid")};this.checkAuthData(t)&&(this.atCurrentAuthData=t)},t.prototype.getAuthDataFromParams=function(){var r=this;this.activatedRoute.queryParams&&this.activatedRoute.queryParams.subscribe(function(t){var e={accessToken:t.token||t.auth_token,client:t.client_id,expiry:t.expiry,tokenType:"Bearer",uid:t.uid};r.checkAuthData(e)&&(r.atCurrentAuthData=e)})},t.prototype.setAuthData=function(t){this.checkAuthData(t)&&(this.atCurrentAuthData=t,localStorage.setItem("accessToken",t.accessToken),localStorage.setItem("client",t.client),localStorage.setItem("expiry",t.expiry),localStorage.setItem("tokenType",t.tokenType),localStorage.setItem("uid",t.uid),null!=this.atCurrentUserType&&localStorage.setItem("userType",this.atCurrentUserType.name))},t.prototype.checkAuthData=function(t){return null!=t.accessToken&&null!=t.client&&null!=t.expiry&&null!=t.tokenType&&null!=t.uid&&(null==this.atCurrentAuthData||t.expiry>=this.atCurrentAuthData.expiry)},t.prototype.getUserPath=function(){return null==this.atCurrentUserType?"":this.atCurrentUserType.path+"/"},t.prototype.getApiPath=function(){var t="";return null!=this.atOptions.apiBase&&(t+=this.atOptions.apiBase+"/"),null!=this.atOptions.apiPath&&(t+=this.atOptions.apiPath+"/"),t},t.prototype.getOAuthPath=function(t){var e;return null==(e=this.atOptions.oAuthPaths[t])&&(e="/auth/"+t),e},t.prototype.getOAuthUrl=function(t,e,r){var n;return n=this.atOptions.oAuthBase+"/"+t,n+="?omniauth_window_type="+r,n+="&auth_origin_url="+encodeURIComponent(e),null!=this.atCurrentUserType&&(n+="&resource_class="+this.atCurrentUserType.name),n},t.prototype.requestCredentialsViaPostMessage=function(t){var e=u.Observable.interval(500),r=u.Observable.fromEvent(window,"message").pluck("data").filter(this.oAuthWindowResponseFilter),n=(r.subscribe(this.getAuthDataFromPostMessage.bind(this)),e.subscribe(function(){t.closed?n.unsubscribe():t.postMessage("requestCredentials","*")}));return r},t.prototype.oAuthWindowResponseFilter=function(t){if("deliverCredentials"==t.message||"authFailure"==t.message)return t},t.prototype.getUserTypeByName=function(e){return null==e||null==this.atOptions.userTypes?null:this.atOptions.userTypes.find(function(t){return t.name===e})},t}();P.decorators=[{type:e.NgModule,args:[{providers:[S]}]},{type:e.Injectable}],P.ctorParameters=function(){return[{type:i.Http},{type:o.ActivatedRoute,decorators:[{type:e.Optional}]},{type:o.Router,decorators:[{type:e.Optional}]}]};var A=function(){function t(t,e,r){var n=this;this._formService=t,this._sessionService=e,this._router=r,this._formService.initForm(c),this._formService.submit$.subscribe(function(t){return n._sessionService.signIn(t).subscribe(function(t){return n._handleSuccess(t)},function(t){return n._handleError(t)})})}return t.prototype._handleSuccess=function(t){this._errors=null,this._formService.unlockSubmit(),this._router.navigate(["restricted"])},t.prototype._handleError=function(t){this._errors=t.json().errors,this._formService.unlockSubmit()},t}();A.decorators=[{type:e.Component,args:[{selector:"a2t-sign-in",providers:[p],template:'\n        <a2t-headline>Sign In</a2t-headline>\n        <a2t-error [errors]="_errors"></a2t-error>\n        <a2t-form>Sign In</a2t-form>\n        <a2t-links case="sign-in"></a2t-links>\n    '}]}],A.ctorParameters=function(){return[{type:p},{type:P},{type:o.Router}]};var x=function(){function t(t,e,r){var n=this;this._formService=t,this._sessionService=e,this._router=r,this._formService.initForm(h),this._formService.submit$.subscribe(function(t){return n._sessionService.registerAccount(t).subscribe(function(t){return n._handleSuccess(t)},function(t){return n._handleError(t)})})}return t.prototype._handleSuccess=function(t){this._errors=null,this._formService.unlockSubmit(),this._router.navigate(["restricted"])},t.prototype._handleError=function(t){this._errors=t.json().errors.full_messages,this._formService.unlockSubmit()},t}();x.decorators=[{type:e.Component,args:[{selector:"a2t-sign-up",providers:[p],template:'\n        <a2t-headline>Sign Up</a2t-headline>\n        <a2t-error [errors]="_errors"></a2t-error>\n        <a2t-form>Sign Up</a2t-form>\n        <a2t-links case="sign-up"></a2t-links>\n    '}]}],x.ctorParameters=function(){return[{type:p},{type:P},{type:o.Router}]};var C=function(){function t(t,e){var r=this;this._formService=t,this._sessionService=e,this._emailSend=!1,this._formService.initForm(d),this._formService.submit$.subscribe(function(t){return r._sessionService.resetPassword(t).subscribe(function(t){return r._handleSuccess()},function(t){return r._handleError()})})}return t.prototype._handleSuccess=function(){this._emailSend=!0},t.prototype._handleError=function(){this._emailSend=!0},t}();C.decorators=[{type:e.Component,args:[{selector:"a2t-reset-password",providers:[p],template:'\n        <a2t-headline *ngIf="!_emailSend">Reset your Password</a2t-headline>\n        <a2t-form *ngIf="!_emailSend">Reset Password</a2t-form>\n        <p class="email-send-text" *ngIf="_emailSend">\n            If the entered email is registered we will send instruction on how to reset your password.\n        </p>\n        <a2t-links *ngIf="!_emailSend" case="reset-password"></a2t-links>\n    ',styles:["\n        .email-send-text {\n            background-color: #72c380;\n            color: white;\n            font-size: 16pt;\n            text-align: center;\n            padding: 20px;\n            border-radius: 3px;\n        }\n    "]}]}],C.ctorParameters=function(){return[{type:p},{type:P}]};var O=function(){function t(t,e,r){var n=this;this._formService=t,this._sessionService=e,this._router=r,this._formService.initForm(m),this._formService.submit$.subscribe(function(t){return n._sessionService.updatePassword(t).subscribe(function(t){return n._handleSuccess(t)},function(t){return n._handleError(t)})})}return t.prototype._handleSuccess=function(t){this._router.navigate(["session/sign-in"])},t.prototype._handleError=function(t){this._errors=t.json().errors,this._formService.unlockSubmit()},t}();O.decorators=[{type:e.Component,args:[{selector:"a2t-update-password",providers:[p],template:'\n        <a2t-headline>Update your Password</a2t-headline>\n        <a2t-error [errors]="_errors"></a2t-error>\n        <a2t-form>Update Password</a2t-form>\n    '}]}],O.ctorParameters=function(){return[{type:p},{type:P},{type:o.Router}]};var T=[{path:"session",component:_,children:[{path:"sign-in",component:A},{path:"sign-up",component:x},{path:"reset-password",component:C},{path:"update-password",component:O,canActivate:[P]}]}],q=o.RouterModule.forChild(T),I=function(){};I.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule,o.RouterModule,w,q],declarations:[_,A,x,C,O]}]}],I.ctorParameters=function(){return[]},t.A2tUiModule=I,t.Angular2TokenService=P,t.ɵa=k,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular2-token.umd.min.js.map
