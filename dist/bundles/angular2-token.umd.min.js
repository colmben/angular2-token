!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common"),require("@angular/router"),require("@angular/common/http"),require("rxjs/Observable"),require("rxjs/add/operator/share"),require("rxjs/add/observable/interval"),require("rxjs/add/observable/fromEvent"),require("rxjs/add/operator/pluck"),require("rxjs/add/operator/filter"),require("url-parse"),require("rxjs/operators")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/forms","@angular/common","@angular/router","@angular/common/http","rxjs/Observable","rxjs/add/operator/share","rxjs/add/observable/interval","rxjs/add/observable/fromEvent","rxjs/add/operator/pluck","rxjs/add/operator/filter","url-parse","rxjs/operators"],e):e(t["angular2-token"]={},t.ng.core,t.ng.forms,t.ng.common,t.ng.router,t.ng.common.http,t.Rx,t.Rx.Observable.prototype,t.Rx.Observable,t.Rx.Observable,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.urlParse,t.Rx.Observable.prototype)}(this,function(t,e,r,n,o,a,s,i,u,l,p,c,h,d){"use strict";var f=function(){function t(){this.submit$=new e.EventEmitter,this.submitLock=!1}return t.prototype.initForm=function(t){this.fields=t,this._createFormGroup()},t.prototype.submit=function(){this.submitLock=!0,this.submit$.emit(this.formGroup.value)},t.prototype.unlockSubmit=function(){this.formGroup.reset(),this.submitLock=!1},t.prototype._createFormGroup=function(){var e={};this.fields.forEach(function(t){e[t.key]=new r.FormControl(null,t.validators)}),this.formGroup=new r.FormGroup(e)},t}();f.decorators=[{type:e.Injectable}],f.ctorParameters=function(){return[]};var m=function(t){void 0===t&&(t={}),this.value=t.value,this.key=t.key||"",this.label=t.label||"",this.validators=t.validators===undefined?[]:t.validators,this.type=t.type||""},g=[new m({key:"email",label:"Email",type:"text",validators:[r.Validators.required,r.Validators.minLength(8)]}),new m({key:"password",label:"Password",type:"password",validators:[r.Validators.required,r.Validators.minLength(8)]})],y=[new m({key:"email",label:"Email",type:"text",validators:[r.Validators.required,r.Validators.minLength(8)]}),new m({key:"password",label:"Password",type:"password",validators:[r.Validators.required,r.Validators.minLength(8)]}),new m({key:"passwordConfirmation",label:"Password Confirmation",type:"password",validators:[r.Validators.required,r.Validators.minLength(8)]})],b=[new m({key:"email",label:"Email",type:"text",validators:[r.Validators.required,r.Validators.minLength(8)]})],v=[new m({key:"password",label:"Password",type:"password",validators:[r.Validators.required,r.Validators.minLength(8)]}),new m({key:"passwordConfirmation",label:"Password Confirmation",type:"password",validators:[r.Validators.required,r.Validators.minLength(8)]}),new m({key:"passwordCurrent",label:"Old Password",type:"password",validators:[r.Validators.required,r.Validators.minLength(8)]})],w=function(){function t(){}return t.prototype.ngOnInit=function(){this._control=this.form.controls[this.question.key]},Object.defineProperty(t.prototype,"isValid",{get:function(){return this._control.valid},enumerable:!0,configurable:!0}),t}();w.decorators=[{type:e.Component,args:[{selector:"a2t-form-field",template:'\n        <div class="a2t-input-group"\n            [formGroup]="form">\n            <label\n                [attr.for]="question.key"\n                [style.color]="labelColor"\n                *ngIf="_control.pristine">\n                {{question.label}}\n            </label>\n            <label class="a2t-error"\n                [attr.for]="question.key"\n                *ngIf="_control.hasError(\'required\') && !_control.pristine">\n                {{question.label}} is required\n            </label>\n            <label class="a2t-error"\n                [attr.for]="question.key"\n                *ngIf="_control.hasError(\'minlength\')">\n                {{question.label}} is too short\n            </label>\n            <label class="a2t-error"\n                [attr.for]="question.key"\n                *ngIf="_control.hasError(\'maxlength\')">\n                {{question.label}} is too long\n            </label>\n            <label class="a2t-valid"\n                [attr.for]="question.key"\n                *ngIf="_control.valid && !_control.pristine">\n                {{question.label}}\n            </label>\n            <input\n                [formControlName]="question.key"\n                [id]="question.key"\n                [type]="question.type">\n        </div>\n    ',styles:['\n        .a2t-input-group {\n            padding-bottom: 40px;\n            padding-right: 20px;\n            padding-left: 20px;\n            font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;\n        }\n        .a2t-input-group input {\n            width: 100%;\n            outline: none;\n            border: none;\n            background-color: #eee;\n            line-height: 40px;\n            padding-left: 10px;\n            padding-right: 10px;\n        }\n        .a2t-input-group label {\n            color: #666;\n            font-weight: 600;\n            font-size: 13px;\n            margin-bottom: 0;\n        }\n        .a2t-error {\n            color: #df6564 !important;\n        }\n        .a2t-valid {\n            color: #72c380 !important;\n        }\n    ']}]}],w.ctorParameters=function(){return[]},w.propDecorators={question:[{type:e.Input}],form:[{type:e.Input}]};var k=function(t){this._formService=t};k.decorators=[{type:e.Component,args:[{selector:"a2t-form",template:'\n        <form class="a2t-form"\n            (ngSubmit)="_formService.submit()"\n            [formGroup]="_formService.formGroup">\n            <a2t-form-field\n                *ngFor="let field of this._formService.fields"\n                [question]="field"\n                [form]="_formService.formGroup">\n            </a2t-form-field>\n            <button type="submit" [disabled]="!_formService.formGroup.valid || _formService.formGroup.pristine || _formService.submitLock">\n                <ng-content *ngIf="!_formService.submitLock"></ng-content>\n                <span *ngIf="_formService.submitLock">Submitting ...</span>\n            </button>\n        </form>\n    ',styles:['\n        .a2t-form {\n            background-color: white;\n            border-radius: 3px;\n            box-shadow: 0px 1px 5px 0 rgba(0,0,0,0.3);\n            padding-top: 20px;\n            font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;\n        }\n        .a2t-form button {\n            width: 100%;\n            transition: .3s;\n            background-color: #72c380;\n            border-bottom-right-radius: 3px;\n            border-bottom-left-radius: 3px;\n            outline: none;\n            text-align: center;\n            font-weight: 400;\n            border: none;\n            font-size: 16px;\n            line-height: 30px;\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.25);\n            color: white;\n            border-bottom: 3px solid transparent;\n        }\n        .a2t-form button:disabled {\n            background-color: #eee !important;\n            cursor: not-allowed;\n            color: #999;\n            text-shadow: none;\n        }\n        .a2t-form button:hover {\n            background-color: #a6d9ae;\n        }\n    ']}]}],k.ctorParameters=function(){return[{type:f}]};var _=function(){};_.decorators=[{type:e.Component,args:[{selector:"a2t-links",template:'\n        <div class="a2t-wrapper">\n            <p><a routerLink="/session/reset-password" *ngIf="case != \'reset-password\'">Forgot Password?</a></p>\n            <p><a routerLink="/session/sign-up" *ngIf="case != \'sign-up\'">Sign Up</a></p>\n            <p><a routerLink="/session/sign-in" *ngIf="case != \'sign-in\'">Sign In</a></p>\n        </div>\n    ',styles:['\n        .a2t-wrapper {\n            margin-top: 20px;\n        }\n        p {\n            margin-bottom: 0;\n        }\n        a {\n            color: #eee !important;\n            transition: .3s;\n            text-decoration: none;\n            font-size: 15px;\n            font-weight: 300;\n            font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;\n        }\n        a:hover {\n            color: white;\n        }\n    ']}]}],_.ctorParameters=function(){return[]},_.propDecorators={"case":[{type:e.Input}]};var S=function(){};S.decorators=[{type:e.Component,args:[{selector:"a2t-error",template:'<div *ngFor="let error of errors"><p>{{error}}</p></div>',styles:["\n        div {\n            width: 100%;\n            background-color: #df6564;\n            color: white;\n            font-weight: 300;\n            font-size: 15px;\n            padding: 10px 20px;\n            border-radius: 3px;\n            margin-bottom: 15px;\n        }\n        div > p {\n            margin-bottom: 0;\n        }\n    "]}]}],S.ctorParameters=function(){return[]},S.propDecorators={errors:[{type:e.Input}]};var P=function(){};P.decorators=[{type:e.Component,args:[{selector:"a2t-headline",template:"<p><ng-content></ng-content></p>",styles:["\n        p {\n            text-align: center;\n            color: white;\n            font-size: 30px;\n        }\n    "]}]}],P.ctorParameters=function(){return[]};var x=function(){};x.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule,r.ReactiveFormsModule,o.RouterModule],declarations:[w,k,_,S,P],exports:[k,_,S,P]}]}],x.ctorParameters=function(){return[]};var A=function(){};A.decorators=[{type:e.Component,args:[{selector:"a2t-ui",template:'\n        <div class="a2t-wrapper">\n            <div class="a2t-container">\n                <router-outlet></router-outlet>\n            </div>\n        </div>\n    ',styles:["\n        .a2t-wrapper {\n            width: 100%;\n            height: 100vh;\n            min-height: 500px;\n            padding-top: 100px;\n            display: flex;\n            justify-content: center;\n            background-color: #3270a0;\n        }\n        .a2t-logo {\n            text-align: center;\n            color: white;\n            font-size: 30px;\n        }\n        .a2t-container {\n            width: 400px;\n        }\n    "]}]}],A.ctorParameters=function(){return[]};var T=function(){function t(t,e,r){this.http=t,this.activatedRoute=e,this.router=r}return Object.defineProperty(t.prototype,"currentUserType",{get:function(){return null!=this.atCurrentUserType?this.atCurrentUserType.name:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentUserData",{get:function(){return this.atCurrentUserData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentAuthData",{get:function(){return this.atCurrentAuthData},set:function(t){this.setAuthData(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentAuthHeaders",{get:function(){return null!=this.atCurrentAuthData?new a.HttpHeaders({"access-token":this.atCurrentAuthData.accessToken,client:this.atCurrentAuthData.client,expiry:this.atCurrentAuthData.expiry,"token-type":this.atCurrentAuthData.tokenType,uid:this.atCurrentAuthData.uid}):new a.HttpHeaders},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"apiPath",{get:function(){return this.getApiPath()},enumerable:!0,configurable:!0}),t.prototype.userSignedIn=function(){return!!this.atCurrentAuthData},t.prototype.canActivate=function(){return!!this.userSignedIn()||(this.atOptions.signInStoredUrlStorageKey&&localStorage.setItem(this.atOptions.signInStoredUrlStorageKey,window.location.pathname+window.location.search),this.router&&this.atOptions.signInRedirect&&this.router.navigate([this.atOptions.signInRedirect]),!1)},t.prototype.init=function(t){var e={apiPath:null,apiBase:null,signInPath:"auth/sign_in",signInRedirect:null,signInStoredUrlStorageKey:null,signOutPath:"auth/sign_out",validateTokenPath:"auth/validate_token",signOutFailedValidate:!1,registerAccountPath:"auth",deleteAccountPath:"auth",registerAccountCallback:window.location.href,updatePasswordPath:"auth",resetPasswordPath:"auth/password",resetPasswordCallback:window.location.href,userTypes:null,oAuthBase:window.location.origin,oAuthPaths:{github:"auth/github"},oAuthCallbackPath:"oauth_callback",oAuthWindowType:"newWindow",oAuthWindowOptions:null,globalOptions:{headers:{"Content-Type":"application/json",Accept:"application/json"}}};this.atOptions=Object.assign(e,t),this.tryLoadAuthData()},t.prototype.registerAccount=function(t){return null==t.userType?this.atCurrentUserType=null:(this.atCurrentUserType=this.getUserTypeByName(t.userType),delete t.userType),t.password_confirmation=t.passwordConfirmation,delete t.passwordConfirmation,t.confirm_success_url=this.atOptions.registerAccountCallback,this.request("POST",this.getUserPath()+this.atOptions.registerAccountPath,JSON.stringify(t))},t.prototype.deleteAccount=function(){return this.request("DELETE",this.getUserPath()+this.atOptions.deleteAccountPath)},t.prototype.signIn=function(t){var e=this;console.log("In singIn tap!"),null==t.userType?this.atCurrentUserType=null:this.atCurrentUserType=this.getUserTypeByName(t.userType);var r=JSON.stringify({email:t.email,password:t.password}),n=this.request("POST",this.getUserPath()+this.atOptions.signInPath,r);return console.log("In singIn tap, returned observ : ",n),n.pipe(d.tap(function(t){console.log("In singIn tap, res  : ",t),e.atCurrentUserData=t.data,console.log("In singIn tap, this.atCurrentUserData  : ",e.atCurrentUserData)},function(t){console.log("In singIn tap, error : ",t)}))},t.prototype.signInOAuth=function(t){var e=this.getOAuthPath(t),r=window.location.origin+"/"+this.atOptions.oAuthCallbackPath,n=this.atOptions.oAuthWindowType,o=this.getOAuthUrl(e,r,n);if("newWindow"==n){var a=this.atOptions.oAuthWindowOptions,s="";if(a)for(var i in a)s+=","+i+"="+a[i];var u=window.open(o,"_blank","closebuttoncaption=Cancel"+s);return this.requestCredentialsViaPostMessage(u)}if("sameWindow"!=n)throw'Unsupported oAuthWindowType "'+n+'"';window.location.href=o},t.prototype.processOAuthCallback=function(){this.getAuthDataFromParams()},t.prototype.signOut=function(){var t=this.request("DELETE",this.getUserPath()+this.atOptions.signOutPath);return localStorage.removeItem("accessToken"),localStorage.removeItem("client"),localStorage.removeItem("expiry"),localStorage.removeItem("tokenType"),localStorage.removeItem("uid"),this.atCurrentAuthData=null,this.atCurrentUserType=null,this.atCurrentUserData=null,t},t.prototype.validateToken=function(){var e=this,t=this.request("GET",this.getUserPath()+this.atOptions.validateTokenPath);return t.pipe(d.tap(function(t){t instanceof a.HttpResponse&&(e.atCurrentUserData=t.data)},function(t){401===t.status&&e.atOptions.signOutFailedValidate&&e.signOut()})),t},t.prototype.updatePassword=function(t){var e;null!=t.userType&&(this.atCurrentUserType=this.getUserTypeByName(t.userType)),e=null==t.passwordCurrent?{password:t.password,password_confirmation:t.passwordConfirmation}:{current_password:t.passwordCurrent,password:t.password,password_confirmation:t.passwordConfirmation},t.resetPasswordToken&&(e.reset_password_token=t.resetPasswordToken,this.tryLoadAuthData());var r=JSON.stringify(e);return this.request("PUT",this.getUserPath()+this.atOptions.updatePasswordPath,r)},t.prototype.resetPassword=function(t){null==t.userType?this.atCurrentUserType=null:this.atCurrentUserType=this.getUserTypeByName(t.userType);var e=JSON.stringify({email:t.email,redirect_url:this.atOptions.resetPasswordCallback});return this.request("POST",this.getUserPath()+this.atOptions.resetPasswordPath,e)},t.prototype.request=function(t,e,r){var n={},o=this.atOptions.globalOptions.headers;return n.headers=new a.HttpHeaders(o),n.body=r,this.http.request(t,this.getApiPath()+e,n)},t.prototype.tryLoadAuthData=function(){var t=this.getUserTypeByName(localStorage.getItem("userType"));t&&(this.atCurrentUserType=t),this.getAuthDataFromStorage(),this.getAuthDataFromParams(),this.atCurrentAuthData&&this.validateToken()},t.prototype.getAuthDataFromPostMessage=function(t){var e={accessToken:t.auth_token,client:t.client_id,expiry:t.expiry,tokenType:"Bearer",uid:t.uid};this.setAuthData(e)},t.prototype.getAuthDataFromStorage=function(){var t={accessToken:localStorage.getItem("accessToken"),client:localStorage.getItem("client"),expiry:localStorage.getItem("expiry"),tokenType:localStorage.getItem("tokenType"),uid:localStorage.getItem("uid")};this.checkAuthData(t)&&(this.atCurrentAuthData=t)},t.prototype.getAuthDataFromParams=function(){var t=new h(window.location.href,!0);if(t&&t.query){var e={accessToken:t.query.token||t.query.auth_token,client:t.query.client_id,expiry:t.query.expiry,tokenType:"Bearer",uid:t.query.uid};this.checkAuthData(e)&&(this.atCurrentAuthData=e)}},t.prototype.setAuthData=function(t){this.checkAuthData(t)&&(this.atCurrentAuthData=t,localStorage.setItem("accessToken",t.accessToken),localStorage.setItem("client",t.client),localStorage.setItem("expiry",t.expiry),localStorage.setItem("tokenType",t.tokenType),localStorage.setItem("uid",t.uid),null!=this.atCurrentUserType&&localStorage.setItem("userType",this.atCurrentUserType.name))},t.prototype.checkAuthData=function(t){return null!=t.accessToken&&null!=t.client&&null!=t.expiry&&null!=t.tokenType&&null!=t.uid&&(null==this.atCurrentAuthData||t.expiry>=this.atCurrentAuthData.expiry)},t.prototype.getUserPath=function(){return null==this.atCurrentUserType?"":this.atCurrentUserType.path+"/"},t.prototype.getApiPath=function(){var t="";return null!=this.atOptions.apiBase&&(t+=this.atOptions.apiBase+"/"),null!=this.atOptions.apiPath&&(t+=this.atOptions.apiPath+"/"),t},t.prototype.getOAuthPath=function(t){var e;return null==(e=this.atOptions.oAuthPaths[t])&&(e="/auth/"+t),e},t.prototype.getOAuthUrl=function(t,e,r){var n;return n=this.atOptions.oAuthBase+"/"+t,n+="?omniauth_window_type="+r,n+="&auth_origin_url="+encodeURIComponent(e),null!=this.atCurrentUserType&&(n+="&resource_class="+this.atCurrentUserType.name),n},t.prototype.requestCredentialsViaPostMessage=function(t){var e=s.Observable.interval(500),r=s.Observable.fromEvent(window,"message").pluck("data").filter(this.oAuthWindowResponseFilter),n=(r.subscribe(this.getAuthDataFromPostMessage.bind(this)),e.subscribe(function(){t.closed?n.unsubscribe():t.postMessage("requestCredentials","*")}));return r},t.prototype.oAuthWindowResponseFilter=function(t){if("deliverCredentials"==t.message||"authFailure"==t.message)return t},t.prototype.getUserTypeByName=function(e){return null==e||null==this.atOptions.userTypes?null:this.atOptions.userTypes.find(function(t){return t.name===e})},t}();T.decorators=[{type:e.Injectable}],T.ctorParameters=function(){return[{type:a.HttpClient},{type:o.ActivatedRoute,decorators:[{type:e.Optional}]},{type:o.Router,decorators:[{type:e.Optional}]}]};var C=function(){function t(t,e,r){var n=this;this._formService=t,this._sessionService=e,this._router=r,this._formService.initForm(g),this._formService.submit$.subscribe(function(t){return n._sessionService.signIn(t).subscribe(function(t){return n._handleSuccess(t)},function(t){return n._handleError(t)})})}return t.prototype._handleSuccess=function(t){this._errors=null,this._formService.unlockSubmit(),this._router.navigate(["restricted"])},t.prototype._handleError=function(t){this._errors=t.json().errors,this._formService.unlockSubmit()},t}();C.decorators=[{type:e.Component,args:[{selector:"a2t-sign-in",providers:[f],template:'\n        <a2t-headline>Sign In</a2t-headline>\n        <a2t-error [errors]="_errors"></a2t-error>\n        <a2t-form>Sign In</a2t-form>\n        <a2t-links case="sign-in"></a2t-links>\n    '}]}],C.ctorParameters=function(){return[{type:f},{type:T},{type:o.Router}]};var I=function(){function t(t,e,r){var n=this;this._formService=t,this._sessionService=e,this._router=r,this._formService.initForm(y),this._formService.submit$.subscribe(function(t){return n._sessionService.registerAccount(t).subscribe(function(t){return n._handleSuccess(t)},function(t){return n._handleError(t)})})}return t.prototype._handleSuccess=function(t){this._errors=null,this._formService.unlockSubmit(),this._router.navigate(["restricted"])},t.prototype._handleError=function(t){this._errors=t.json().errors.full_messages,this._formService.unlockSubmit()},t}();I.decorators=[{type:e.Component,args:[{selector:"a2t-sign-up",providers:[f],template:'\n        <a2t-headline>Sign Up</a2t-headline>\n        <a2t-error [errors]="_errors"></a2t-error>\n        <a2t-form>Sign Up</a2t-form>\n        <a2t-links case="sign-up"></a2t-links>\n    '}]}],I.ctorParameters=function(){return[{type:f},{type:T},{type:o.Router}]};var O=function(){function t(t,e){var r=this;this._formService=t,this._sessionService=e,this._emailSend=!1,this._formService.initForm(b),this._formService.submit$.subscribe(function(t){return r._sessionService.resetPassword(t).subscribe(function(t){return r._handleSuccess()},function(t){return r._handleError()})})}return t.prototype._handleSuccess=function(){this._emailSend=!0},t.prototype._handleError=function(){this._emailSend=!0},t}();O.decorators=[{type:e.Component,args:[{selector:"a2t-reset-password",providers:[f],template:'\n        <a2t-headline *ngIf="!_emailSend">Reset your Password</a2t-headline>\n        <a2t-form *ngIf="!_emailSend">Reset Password</a2t-form>\n        <p class="email-send-text" *ngIf="_emailSend">\n            If the entered email is registered we will send instruction on how to reset your password.\n        </p>\n        <a2t-links *ngIf="!_emailSend" case="reset-password"></a2t-links>\n    ',styles:["\n        .email-send-text {\n            background-color: #72c380;\n            color: white;\n            font-size: 16pt;\n            text-align: center;\n            padding: 20px;\n            border-radius: 3px;\n        }\n    "]}]}],O.ctorParameters=function(){return[{type:f},{type:T}]};var q=function(){function t(t,e,r){var n=this;this._formService=t,this._sessionService=e,this._router=r,this._formService.initForm(v),this._formService.submit$.subscribe(function(t){return n._sessionService.updatePassword(t).subscribe(function(t){return n._handleSuccess(t)},function(t){return n._handleError(t)})})}return t.prototype._handleSuccess=function(t){this._router.navigate(["session/sign-in"])},t.prototype._handleError=function(t){this._errors=t.json().errors,this._formService.unlockSubmit()},t}();q.decorators=[{type:e.Component,args:[{selector:"a2t-update-password",providers:[f],template:'\n        <a2t-headline>Update your Password</a2t-headline>\n        <a2t-error [errors]="_errors"></a2t-error>\n        <a2t-form>Update Password</a2t-form>\n    '}]}],q.ctorParameters=function(){return[{type:f},{type:T},{type:o.Router}]};var U=[{path:"session",component:A,children:[{path:"sign-in",component:C},{path:"sign-up",component:I},{path:"reset-password",component:O},{path:"update-password",component:q,canActivate:[T]}]}],D=o.RouterModule.forChild(U),j=function(){};j.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule,o.RouterModule,x,D],declarations:[A,C,I,O,q]}]}],j.ctorParameters=function(){return[]};var R=function(){function t(t){this._tokenService=t,this.apiPath=this._tokenService.apiPath}return t.prototype.intercept=function(e,t){var r=this;console.log("In token interceptor, request : ",e,this._tokenService.currentAuthHeaders);var n=this._tokenService.currentAuthHeaders;e.headers.keys().forEach(function(t){n=n.append(t,e.headers.get(t))});if(console.log("In intercept request, new headers : ",n),e.url.match(this.apiPath)){e=e.clone({headers:n});var o=this._tokenService.currentAuthHeaders;o.keys().forEach(function(t){e.headers.append(t,o.get(t))})}return t.handle(e).pipe(d.tap(function(t){console.log("In token interceptor, evt : ",t),t instanceof a.HttpResponse&&t.url.match(r.apiPath)&&(console.log("---\x3e status:",t.status),console.log("---\x3e filter:",e.params.get("filter")),r.getAuthHeadersFromResponse(t))},function(t){console.log("In token interceptor, err : ",t),t instanceof a.HttpErrorResponse&&t.url&&t.url.match(r.apiPath)?(console.log("In token interceptor, HTTP err : ",t),r.getAuthHeadersFromResponse(t)):console.log("Auth Interceptor, non HTTP or no headers error - ",t)}))},t.prototype.getAuthHeadersFromResponse=function(t){var e=t.headers,r={accessToken:e.get("access-token"),client:e.get("client"),expiry:e.get("expiry"),tokenType:e.get("token-type"),uid:e.get("uid")};this._tokenService.currentAuthData=r},t}();R.decorators=[{type:e.Injectable}],R.ctorParameters=function(){return[{type:T}]},t.A2tUiModule=j,t.Angular2TokenService=T,t.Angular2TokenInteceptor=R,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular2-token.umd.min.js.map
